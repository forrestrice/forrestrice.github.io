<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Introducing Bridgebots Part 3: LIN files and JSON" /><meta property="og:locale" content="en_US" /><meta name="description" content="In my last post I covered how Bridgebots records the auction and the play of the hand, and how it can be used to import and analyze results from PBN files. Today we will expand that functionality to LIN and JSON files, and your long-winded introduction to Bridgebots will be complete!" /><meta property="og:description" content="In my last post I covered how Bridgebots records the auction and the play of the hand, and how it can be used to import and analyze results from PBN files. Today we will expand that functionality to LIN and JSON files, and your long-winded introduction to Bridgebots will be complete!" /><link rel="canonical" href="https://forrestrice.com/posts/Introducing-Bridgebots-Part-3/" /><meta property="og:url" content="https://forrestrice.com/posts/Introducing-Bridgebots-Part-3/" /><meta property="og:site_name" content="Forrest Rice" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-11-27T11:45:09-08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Introducing Bridgebots Part 3: LIN files and JSON" /><meta name="twitter:site" content="@Forrest_Rice" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"In my last post I covered how Bridgebots records the auction and the play of the hand, and how it can be used to import and analyze results from PBN files. Today we will expand that functionality to LIN and JSON files, and your long-winded introduction to Bridgebots will be complete!","url":"https://forrestrice.com/posts/Introducing-Bridgebots-Part-3/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://forrestrice.com/posts/Introducing-Bridgebots-Part-3/"},"headline":"Introducing Bridgebots Part 3: LIN files and JSON","dateModified":"2021-11-28T00:26:43-08:00","datePublished":"2021-11-27T11:45:09-08:00","@context":"https://schema.org"}</script><title>Introducing Bridgebots Part 3: LIN files and JSON | Forrest Rice</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Forrest Rice"><meta name="application-name" content="Forrest Rice"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/headshot.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Forrest Rice</a></div><div class="site-subtitle font-italic">Life and other games</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/forrestrice" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/Forrest_Rice" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['forrest.d.rice','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Introducing Bridgebots Part 3: LIN files and JSON</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Introducing Bridgebots Part 3: LIN files and JSON</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Forrest Rice </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Nov 27, 2021, 11:45 AM -0800" prep="on" > Nov 27, 2021 <i class="unloaded">2021-11-27T11:45:09-08:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Nov 28, 2021, 12:26 AM -0800" prefix="Updated " > Nov 28, 2021 <i class="unloaded">2021-11-28T00:26:43-08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1393 words">7 min</span></div></div><div class="post-content"><p>In my <a href="/posts/Introducing-Bridgebots-Part-2">last post</a> I covered how <a href="https://github.com/forrestrice/bridge-bots">Bridgebots</a> records the auction and the play of the hand, and how it can be used to import and analyze results from PBN files. Today we will expand that functionality to LIN and JSON files, and your long-winded introduction to Bridgebots will be complete!</p><h3 id="linsanity">LINsanity</h3><p><a href="https://www.bridgebase.com">Bridge Base Online</a>(BBO) is a popular site for playing bridge both competitively and casually. One of its greatest features is the history it saves for each user and tournament. Here are some helpful places to find these:</p><ul><li><a href="https://www.bridgebase.com/myhands/index.php?&amp;from_login=0">Player Hand Records </a> (requires account)<li><a href="https://www.bridgebase.com/vugraph_archives/vugraph_archives.php">Vugraph Archives</a><li><a href="https://www.bridgebase.com/tourneyhistory/">Recent Tournaments</a></ul><p>BBO provides an interactive <code class="language-plaintext highlighter-rouge">Movie</code> viewing option or a <code class="language-plaintext highlighter-rouge">Lin</code> file for download. I don’t actually know what LIN stands for (if you do let me know!). It contains all the juicy details we need to record the play of a bridge hand, but it takes a little bit of puzzling to figure out what each part means. Here’s an example:</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pn|SBlumlein,Forrest_,grychn48,granola357|st||md|2S9HJ872DQT64CQJ43,SAK2HA95DAJ875C92,SQ765HKQ64D32CAK6,|rh||ah|Board 12|sv|n|mb|1N|an|15-17|mb|p|mb|2H|an|spades |mb|p|mb|2S|mb|p|mb|p|mb|p|pg||pc|CA|pc|C5|pc|C4|pc|C2|pg||pc|CK|pc|C7|pc|C3|pc|C9|pg||pc|C6|pc|CT|pc|CJ|pc|S2|pg||pc|SA|pc|S5|pc|S3|pc|S9|pg||pc|SK|pc|S6|pc|S4|pc|D4|pg||pc|D5|pc|D3|pc|DK|pc|D6|pg||pc|D9|pc|DQ|pc|DA|pc|D2|pg||pc|DJ|pc|S7|pc|S8|pc|DT|pg||pc|H3|pc|H2|pc|HA|pc|H4|pg||pc|D8|pc|SQ|pc|HT|pc|H7|pg||pc|HK|pc|ST|pc|H8|pc|H5|pg||pc|SJ|pc|HJ|pc|H9|pc|H6|pg||pc|C8|pc|CQ|pc|D7|pc|HQ|pg||
</pre></table></code></div></div><p><a href="https://www.bridgebase.com/tools/handviewer.html?bbo=y&amp;lin=pn|SBlumlein,Forrest_,grychn48,granola357|st%7C%7Cmd%7C2S9HJ872DQT64CQJ43%2CSAK2HA95DAJ875C92%2CSQ765HKQ64D32CAK6%2C%7Crh%7C%7Cah%7CBoard%2012%7Csv%7Cn%7Cmb%7C1N%7Can%7C15-17%7Cmb%7Cp%7Cmb%7C2H%7Can%7Cspades%20%7Cmb%7Cp%7Cmb%7C2S%7Cmb%7Cp%7Cmb%7Cp%7Cmb%7Cp%7Cpc%7CCA%7Cpc%7CC5%7Cpc%7CC4%7Cpc%7CC2%7Cpc%7CCK%7Cpc%7CC7%7Cpc%7CC3%7Cpc%7CC9%7Cpc%7CC6%7Cpc%7CCT%7Cpc%7CCJ%7Cpc%7CS2%7Cpc%7CSA%7Cpc%7CS5%7Cpc%7CS3%7Cpc%7CS9%7Cpc%7CSK%7Cpc%7CS6%7Cpc%7CS4%7Cpc%7CD4%7Cpc%7CD5%7Cpc%7CD3%7Cpc%7CDK%7Cpc%7CD6%7Cpc%7CD9%7Cpc%7CDQ%7Cpc%7CDA%7Cpc%7CD2%7Cpc%7CDJ%7Cpc%7CS7%7Cpc%7CS8%7Cpc%7CDT%7Cpc%7CH3%7Cpc%7CH2%7Cpc%7CHA%7Cpc%7CH4%7Cpc%7CD8%7Cpc%7CSQ%7Cpc%7CHT%7Cpc%7CH7%7Cpc%7CHK%7Cpc%7CST%7Cpc%7CH8%7Cpc%7CH5%7Cpc%7CSJ%7Cpc%7CHJ%7Cpc%7CH9%7Cpc%7CH6%7Cpc%7CC8%7Cpc%7CCQ%7Cpc%7CD7%7Cpc%7CHQ%7C">BBO movie for reference</a></p><p>Parsing it visually we can see the player names, the hands (well three of them), the board number, the vulnerability, the auction, and the play of the hand. LIN files suffer from some of the same issues that afflict PBNs: they are fairly human-readable but they are non-trivial to consume programmatically. Luckily Bridgebots can help us out!</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">bridgebots</span> <span class="kn">import</span> <span class="n">parse_multi_lin</span><span class="p">,</span> <span class="n">parse_single_lin</span>

<span class="n">lin_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s">"path/to/above/example.lin"</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">parse_single_lin</span><span class="p">(</span><span class="n">lin_path</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="go">[DealRecord(deal=Deal(
	dealer=Direction.WEST, ns_vulnerable=True, ew_vulnerable=False
	North: PlayerHand(SQ S7 S6 S5 | HK HQ H6 H4 | D3 D2 | CA CK C6)
	South: PlayerHand(S9 | HJ H8 H7 H2 | DQ DT D6 D4 | CQ CJ C4 C3)
	East: PlayerHand(SJ ST S8 S4 S3 | HT H3 | DK D9 | CT C8 C7 C5)
	West: PlayerHand(SA SK S2 | HA H9 H5 | DA DJ D8 D7 D5 | C9 C2)
), board_records=[BoardRecord(bidding_record=['1NT', 'PASS', '2H', 'PASS', '2S', 'PASS', 'PASS', 'PASS'], raw_bidding_record=['1N', 'p', '2H', 'p', '2S', 'p', 'p', 'p'], play_record=[CA, C5, C4, C2, CK, C7, C3, C9, C6, CT, CJ, S2, SA, S5, S3, S9, SK, S6, S4, D4, D5, D3, DK, D6, D9, DQ, DA, D2, DJ, S7, S8, DT, H3, H2, HA, H4, D8, SQ, HT, H7, HK, ST, H8, H5, SJ, HJ, H9, H6, C8, CQ, D7, HQ], declarer=WEST, contract=Contract(level=2, suit=SPADES, doubled=0), tricks=9, scoring=None, names={SOUTH: 'SBlumlein', WEST: 'Forrest_', NORTH: 'grychn48', EAST: 'granola357'}, date=None, event=None, bidding_metadata=[BidMetadata(bid_index=0, bid='1NT', alerted=False, explanation='15-17'), BidMetadata(bid_index=2, bid='2H', alerted=False, explanation='spades ')], commentary=None, score=140)])]
</span></pre></table></code></div></div><p>As we can see, Bridgebots successfully parsed the deal, bidding, play, and even included the alerts and explanations!</p><p>Bridgebots can also handle multi-board LINs produced by teams matches. For example <a href="https://www.bridgebase.com/tools/handviewer.html?bbo=y&amp;linurl=https://www.bridgebase.com/tools/vugraph_linfetch.php?id=14502">this segment</a> of the 2010 USBF semi-finals can be downloaded <a href="https://www.bridgebase.com/tools/vugraph_linfetch.php?id=14502">here</a>.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">lin_multi_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s">"path/to/sample_multi.lin"</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">parse_multi_lin</span><span class="p">(</span><span class="n">lin_multi_path</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">15
</span></pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">board_records</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">BoardRecord(bidding_record=['1H', 'PASS', '3C', 'PASS', '4H', 'PASS', 'PASS', 'PASS'], raw_bidding_record=['1H', 'p', '3C!', 'p', '4H', 'p', 'p', 'p'], play_record=[C2, C3, CA, CJ, D7, D5, DA, D4, D6, DQ, D9, D3, C9, C4, CK, C5, H2, H9, HA, H5], declarer=EAST, contract=Contract(level=4, suit=HEARTS, doubled=0), tricks=10, scoring=None, names={SOUTH: 'Meckstroth', WEST: 'Levin', NORTH: 'Rodwell', EAST: 'Weinstein'}, date=None, event=None, bidding_metadata=[BidMetadata(bid_index=2, bid='3C', alerted=True, explanation='jacoby 2N')], commentary=[Commentary(bid_index=1, play_index=None, comment='caitlin: Hi all'), Commentary(bid_index=1, play_index=None, comment='vugraphzfk: Hi everyone and welcome back, this is the last segment for today'), Commentary(bid_index=1, play_index=None, comment='ahollan1: same boards played in both Semi-Final matches   use http://www.bbotv.com/vugraph/   to spy on all tables'), Commentary(bid_index=None, play_index=3, comment='ahollan1: ACBL Convention Cards for all Fleisher Team  http://usbf.org/index.php?option=com_content&amp;task=view&amp;id=659&amp;Itemid=284'), Commentary(bid_index=None, play_index=3, comment='vdoubleu: Good ---1 quick hand down'), Commentary(bid_index=None, play_index=3, comment='ahollan1: ACBL CC and WBF CC from 2009 Bermuda Bowl for Nickell team at http://usbf.org/index.php?option=com_content&amp;task=view&amp;id=655&amp;Itemid=284'), Commentary(bid_index=None, play_index=11, comment='vugraphzfk: you jinxed it, Val'), Commentary(bid_index=None, play_index=11, comment='vdoubleu: I noticed:-)')], score=420)
</span></pre></table></code></div></div><p>Bridgebots gives us all its usual goodness and also includes the expert commentary for your (and your computer’s) viewing pleasure.</p><p>Finally, Bridgebots also includes the ability to create LIN strings and URLs from DealRecords. Let’s load up our example Cavendish Pairs PBN from <a href="/posts/Introducing-Bridgebots-Part-2/">Part 2</a> and take a look at it with the BBO interactive viewer!</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">bridgebots</span> <span class="kn">import</span> <span class="n">build_lin_str</span><span class="p">,</span> <span class="n">build_lin_url</span><span class="p">,</span> <span class="n">parse_pbn</span>

<span class="n">pbn_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s">"path/to/cavendish.pbn"</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">parse_pbn</span><span class="p">(</span><span class="n">pbn_path</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">build_lin_str</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">deal</span><span class="p">,</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">board_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">pn|,,,|st||md|4SA954HAT98DQ8C875,S63HK3DK9532CJ963,ST82H62DT764CKQ42,SKQJ7HQJ754DAJCAT|sv|b|mb|1H|mb|p|mb|1S|an|0-4 !ss|mb|p|mb|2C!|mb|p|mb|2H|an|less than 8 points|mb|p|mb|2S|an|17+ with 4 !S|mb|p|mb|3N|mb|p|mb|p|mb|p|pg||pc|CQ|pc|CA|pc|C8|pc|C3|pg||pc|H4|pc|HT|pc|HK|pc|H6|pg||pc|H3|pc|H2|pc|HQ|pc|HA|pg||pc|C5|pc|C6|pc|CK|pc|CT|pg||pc|D4|pc|DJ|pc|DQ|pc|DK|pg||pc|CJ|pc|C2|pc|S7|pc|C7|pg||pc|C9|pc|C4|pc|H5|pc|S4|pg||pc|S6|mc|9|pg||
</span></pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">print</span><span class="p">(</span><span class="n">build_lin_url</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">deal</span><span class="p">,</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">board_records</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">https://www.bridgebase.com/tools/handviewer.html?lin=pn%7C%2C%2C%2C%7Cst%7C%7Cmd%7C4SA954HAT98DQ8C875%2CS63HK3DK9532CJ963%2CST82H62DT764CKQ42%2CSKQJ7HQJ754DAJCAT%7Csv%7Cb%7Cmb%7C1H%7Cmb%7Cp%7Cmb%7C1S%7Can%7C0-4+%21ss%7Cmb%7Cp%7Cmb%7C2C%21%7Cmb%7Cp%7Cmb%7C2H%7Can%7Cless+than+8+points%7Cmb%7Cp%7Cmb%7C2S%7Can%7C17%2B+with+4+%21S%7Cmb%7Cp%7Cmb%7C3N%7Cmb%7Cp%7Cmb%7Cp%7Cmb%7Cp%7Cpg%7C%7Cpc%7CCQ%7Cpc%7CCA%7Cpc%7CC8%7Cpc%7CC3%7Cpg%7C%7Cpc%7CH4%7Cpc%7CHT%7Cpc%7CHK%7Cpc%7CH6%7Cpg%7C%7Cpc%7CH3%7Cpc%7CH2%7Cpc%7CHQ%7Cpc%7CHA%7Cpg%7C%7Cpc%7CC5%7Cpc%7CC6%7Cpc%7CCK%7Cpc%7CCT%7Cpg%7C%7Cpc%7CD4%7Cpc%7CDJ%7Cpc%7CDQ%7Cpc%7CDK%7Cpg%7C%7Cpc%7CCJ%7Cpc%7CC2%7Cpc%7CS7%7Cpc%7CC7%7Cpg%7C%7Cpc%7CC9%7Cpc%7CC4%7Cpc%7CH5%7Cpc%7CS4%7Cpg%7C%7Cpc%7CS6%7Cmc%7C9%7Cpg%7C%7C
</span></pre></table></code></div></div><p>Click <a href="https://www.bridgebase.com/tools/handviewer.html?lin=pn%7C%2C%2C%2C%7Cst%7C%7Cmd%7C4SA954HAT98DQ8C875%2CS63HK3DK9532CJ963%2CST82H62DT764CKQ42%2CSKQJ7HQJ754DAJCAT%7Csv%7Cb%7Cmb%7C1H%7Cmb%7Cp%7Cmb%7C1S%7Can%7C0-4+%21ss%7Cmb%7Cp%7Cmb%7C2C%21%7Cmb%7Cp%7Cmb%7C2H%7Can%7Cless+than+8+points%7Cmb%7Cp%7Cmb%7C2S%7Can%7C17%2B+with+4+%21S%7Cmb%7Cp%7Cmb%7C3N%7Cmb%7Cp%7Cmb%7Cp%7Cmb%7Cp%7Cpg%7C%7Cpc%7CCQ%7Cpc%7CCA%7Cpc%7CC8%7Cpc%7CC3%7Cpg%7C%7Cpc%7CH4%7Cpc%7CHT%7Cpc%7CHK%7Cpc%7CH6%7Cpg%7C%7Cpc%7CH3%7Cpc%7CH2%7Cpc%7CHQ%7Cpc%7CHA%7Cpg%7C%7Cpc%7CC5%7Cpc%7CC6%7Cpc%7CCK%7Cpc%7CCT%7Cpg%7C%7Cpc%7CD4%7Cpc%7CDJ%7Cpc%7CDQ%7Cpc%7CDK%7Cpg%7C%7Cpc%7CCJ%7Cpc%7CC2%7Cpc%7CS7%7Cpc%7CC7%7Cpg%7C%7Cpc%7CC9%7Cpc%7CC4%7Cpc%7CH5%7Cpc%7CS4%7Cpg%7C%7Cpc%7CS6%7Cmc%7C9%7Cpg%7C%7C">here</a> to follow that link.</p><h3 id="json">JSON</h3><p>As we have seen, both PBNs and LINs require significant effort for programs to parse. I wanted the ability to export Bridgebots data in a format that would be easily consumable by other programs. To that end, Bridgebots includes <a href="https://marshmallow.readthedocs.io/en/stable/">Marshmallow</a> schemas for serializing/deserializing its data to/from JSON. These may not be perfect for other programmers bridge needs, but my hope is they will be useful for consuming translated PBN and LIN records. Check out this example:</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">bridgebots</span> <span class="kn">import</span> <span class="n">DealRecordSchema</span><span class="p">,</span> <span class="n">parse_single_lin</span>

<span class="n">results</span> <span class="o">=</span> <span class="n">parse_single_lin</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s">"path/to/sample.lin"</span><span class="p">))</span>
<span class="n">deal_record_schema</span> <span class="o">=</span> <span class="n">DealRecordSchema</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">deal_record_json</span> <span class="o">=</span> <span class="n">deal_record_schema</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">deal_record_json</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
</pre><td class="rouge-code"><pre><span class="go">[
    {
        "deal": {
            "dealer": "W",
            "ns_vulnerable": true,
            "ew_vulnerable": false,
            "hands": {
                "S": [
                    "S9",
                    "HJ",
                    "H8",
                    "H7",
                    "H2",
                    "DQ",
                    "DT",
                    "D6",
                    "D4",
                    "CQ",
                    "CJ",
                    "C4",
                    "C3"
                ],
                "W": [
                    "SA",
                    "SK",
                    "S2",
                    "HA",
                    "H9",
                    "H5",
                    "DA",
                    "DJ",
                    "D8",
                    "D7",
                    "D5",
                    "C9",
                    "C2"
                ],
                "N": [
                    "SQ",
                    "S7",
                    "S6",
                    "S5",
                    "HK",
                    "HQ",
                    "H6",
                    "H4",
                    "D3",
                    "D2",
                    "CA",
                    "CK",
                    "C6"
                ],
                "E": [
                    "SJ",
                    "ST",
                    "S8",
                    "S4",
                    "S3",
                    "HT",
                    "H3",
                    "DK",
                    "D9",
                    "CT",
                    "C8",
                    "C7",
                    "C5"
                ]
            }
        },
        "board_records": [
            {
                "bidding_record": [
                    "1NT",
                    "PASS",
                    "2H",
                    "PASS",
                    "2S",
                    "PASS",
                    "PASS",
                    "PASS"
                ],
                "raw_bidding_record": [
                    "1N",
                    "p",
                    "2H",
                    "p",
                    "2S",
                    "p",
                    "p",
                    "p"
                ],
                "play_record": [
                    "CA",
                    "C5",
                    "C4",
                    "C2",
                    "CK",
                    "C7",
                    "C3",
                    "C9",
                    "C6",
                    "CT",
                    "CJ",
                    "S2",
                    "SA",
                    "S5",
                    "S3",
                    "S9",
                    "SK",
                    "S6",
                    "S4",
                    "D4",
                    "D5",
                    "D3",
                    "DK",
                    "D6",
                    "D9",
                    "DQ",
                    "DA",
                    "D2",
                    "DJ",
                    "S7",
                    "S8",
                    "DT",
                    "H3",
                    "H2",
                    "HA",
                    "H4",
                    "D8",
                    "SQ",
                    "HT",
                    "H7",
                    "HK",
                    "ST",
                    "H8",
                    "H5",
                    "SJ",
                    "HJ",
                    "H9",
                    "H6",
                    "C8",
                    "CQ",
                    "D7",
                    "HQ"
                ],
                "declarer": "W",
                "contract": "2S",
                "tricks": 9,
                "score": 140,
                "scoring": null,
                "names": {
                    "S": "SBlumlein",
                    "W": "Forrest_",
                    "N": "grychn48",
                    "E": "granola357"
                },
                "date": null,
                "event": null,
                "bidding_metadata": [
                    {
                        "bid_index": 0,
                        "bid": "1NT",
                        "alerted": false,
                        "explanation": "15-17"
                    },
                    {
                        "bid_index": 2,
                        "bid": "2H",
                        "alerted": false,
                        "explanation": "spades "
                    }
                ],
                "commentary": null
            }
        ]
    }
]
</span></pre></table></code></div></div><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">reloaded_deal_record</span> <span class="o">=</span> <span class="n">deal_record_schema</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">deal_record_json</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="p">(</span><span class="n">results</span> <span class="o">==</span> <span class="n">reloaded_deal_record</span><span class="p">)</span><span class="o">=</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">(results == reloaded_deal_record)=True
</span></pre></table></code></div></div><h3 id="looking-ahead">Looking ahead</h3><p>It has been great walking you through Bridgebots - thank you so much for reading if you made it this far. I put many hours of effort into its current capabilities, and I am proud of that work, but I hope that this is just the beginning. Here are some possible projects for the future:</p><ul><li>Ability to create PBNs and to read/write PBNv2 files<li>Integration with <a href="https://github.com/anntzer/redeal">redeal</a>, another awesome open-source python bridge library. This would provide simulations and access to <a href="https://github.com/dds-bridge/dds">DDS</a>, a powerful open-source double-dummy solver.<li>Data exploration with python tools like <a href="https://github.com/pandas-dev/pandas">pandas</a> and <a href="https://github.com/matplotlib/matplotlib">matplotlib</a>. I did a little exploration of some bridge data <a href="https://github.com/forrestrice/bridge-bots/blob/master/plot/bridge_analysis.ipynb">here</a>.<li>Creating ML models to analyze and predict bidding and play. I hope to make this the subject of my next post!<li>A web-viewer for Bridgebots data</ul><p>If you have ideas for potential applications of or improvements to Bridgebots, feel free to reach out or submit a pull request.</p><p>Hope to see you at the bridge table!</p><p>-Forrest</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/bridge/'>bridge</a>, <a href='/categories/bridgebots/'>bridgebots</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Introducing Bridgebots Part 3: LIN files and JSON - Forrest Rice&url=https://forrestrice.com/posts/Introducing-Bridgebots-Part-3/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Introducing Bridgebots Part 3: LIN files and JSON - Forrest Rice&u=https://forrestrice.com/posts/Introducing-Bridgebots-Part-3/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Bridgebots-ML-Introduction/">Bridgebots ML: Introduction</a><li><a href="/posts/Introducing-Bridgebots-Part-2/">Introducing Bridgebots Part 2: Deal Records and PBNs</a><li><a href="/posts/Introducing-Bridgebots-Part-3/">Introducing Bridgebots Part 3: LIN files and JSON</a><li><a href="/posts/QT-8-Post-Mortem/">QT 8 Post-Mortem</a><li><a href="/posts/QT-Post-Mortem/">QT Post-Mortem</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Introducting-Bridgebots-Part-1/"><div class="card-body"> <span class="timeago small" > Sep 11, 2021 <i class="unloaded">2021-09-11T12:45:09-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Introducing Bridgebots Part 1: Suits, Cards, Hands, and Deals</h3><div class="text-muted small"><p> Over the past year I have been pursuing a few different bridge programming projects. Eventually I would like to explore the possibility of building ML models which can play and bid competitively, u...</p></div></div></a></div><div class="card"> <a href="/posts/Introducing-Bridgebots-Part-2/"><div class="card-body"> <span class="timeago small" > Sep 18, 2021 <i class="unloaded">2021-09-18T12:45:09-07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Introducing Bridgebots Part 2: Deal Records and PBNs</h3><div class="text-muted small"><p> Last week I introduced a new bridge programming library: Bridgebots. I covered how to create and interact with Cards, Suits, and Deals. Today we’ll look at how Bridgebots represents the auction, th...</p></div></div></a></div><div class="card"> <a href="/posts/Bridgebots-Tools/"><div class="card-body"> <span class="timeago small" > Jan 30 <i class="unloaded">2022-01-30T10:05:09-08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bridgebots Tools: CSV Report</h3><div class="text-muted small"><p> I enjoy participating in the bridge-dev mailing list. There are a lot of cool ideas and discussions happening about building software for bridge. Recently, another group member reached out with que...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Introducing-Bridgebots-Part-2/" class="btn btn-outline-primary" prompt="Older"><p>Introducing Bridgebots Part 2: Deal Records and PBNs</p></a> <a href="/posts/Bridgebots-Tools/" class="btn btn-outline-primary" prompt="Newer"><p>Bridgebots Tools: CSV Report</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/Forrest_Rice">Forrest Rice</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://forrestrice.com{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
